## JavaScript事件学习笔记

> JavaScript与HTML的交互是通过事件完成的，完成事件代表文档或者浏览器窗口中某个有意义的时刻，可以使用仅在事件发生时执行的监听器（处理程序）订阅事件。在传统的软件工程领域，这个模型叫做观察者模式，其能够做到页面行为与页面展示的分离。

###### 事件流

事件流描述了页面接收时间的顺序，分为两种，事件冒泡和事件捕获。

- 事件冒泡：事件被定义为最具体元素（文档树中最深的节点）开始触发，然后向上传播至没有那么具体的元素 。现代浏览器都支持事件冒泡，会一直冒泡到window元素。
- 事件捕获：最不具体的节点最先收到事件，而最具体的节点最后收到事件，事件捕获实际上是为了在事件到达最终目标前拦截事件。
- DOM规范规定事件流分为三个阶段，事件捕获、到达目标和事件冒泡。事件捕获最先发生，为提前拦截事件提供了可能。然而实际的目标在捕获阶段接收不到事件，捕获阶段从document到html再到body就结束了。下一阶段，即会在div元素上触发事件的到达目标阶段，通常在时间处理时被认为是冒泡阶段的一部分。冒泡开始，事件反向传播至文档。

###### 事件处理程序

事件意味着用户或者浏览器执行的某种动作，为响应事件而调用的函数被称为事件处理程序（或事件监听器）。

- HTML事件处理程序

  特定元素支持的每个事件都可以使用事件处理程序的名字以HTML属性的形式来指定，此时属性的值是能够执行的JavaScript代码。

  ```JavaScript
  <input type="button" value="Click" onclick="console.log('Clicked')">
  <input type="button" value="Click" onclick="Clicked()">
  ```

  同时也可以调用其他地方的脚本。作为事件处理程序执行的代码可以访问全局作用域的。

- DOM0事件处理程序和DOM2事件处理程序

  DOM0级时间处理程序：在JavaScript中指定事件处理程序的传统方式是把一个函数赋值给一个事件处理程序属性，要使用指定的事件处理程序，先取得操作对象的引用。

  DOM2事件处理程序：定义了两个方法，addEventListener()和removeEventListener()，这两个方法暴露在所有的DOM节点上，接收三个参数，事件名、时间处理函数和一个布尔值，布尔值的true表示在捕获阶段调用事件处理程序，false表示在冒泡阶段调用。

###### 事件对象

在DOM中发生事件时，所有相关信息都会被收集并存储在一个名为event的对象中。这个对象包含了事件的目标元素、发生的事件类型等基本信息。