## vue源码系列学习---双向绑定

这些算是vue技术栈的面试基本考题了，我也背过，无非就是Object.defineProperty函数的set与get函数，现在详细的学习下。

```JavaScript
function defineReactive (obj, key, val) {
    Object.defineProperty(obj, key, {
        enumerable: true,       /* 属性可枚举 */
        configurable: true,     /* 属性可被修改或删除 */
        get: function reactiveGetter () {
            return val;        
        },
        set: function reactiveSetter (newVal) {
            if (newVal === val) return;
            console.log('更新了视图。。。' + newVal);
        }
    });
}

function observer (value) {
    if (!value || (typeof value !== 'object')) {
        return;
    }

    Object.keys(value).forEach((key) => {
        defineReactive(value, key, value[key]);
    });
}

class Vue {
    constructor(options) {
        this._data = options.data;
        observer(this._data);
    }
}

let o = new Vue({
    data: {
        test: "I am test."
    }
});
o._data.test = "hello,world.";

```

let o  = new Vue({...})，当实例化一个Vue类时，就会执行构造函数，先绑定一个_data属性，该属性是一个由Vue实例化时传入的一个对象的引用，再传入observer()函数，该函数对传入的对象进行遍历，依次传入defineReactive()，defineReactive()函数里封装了Object.defineProperty()，传入了三个参数，需绑定的对象，以及对象属性的key和value，当需绑定的对象中的属性发生了改变，就会触发set函数，执行更新视图的操作。

这里监听了